<!DOCTYPE html>
<html>
  <head></head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Docker And Jenkins.</title>
  <link rel="stylesheet" type="text/css" href="build/build.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <body>
    <article>
      <section data-bespoke-backdrop="backdrop backdrop--title" class="title undefined">
        <h1>Docker and Jenkins. </h1>
        <h3>Orchestrating Continuous Delivery</h3>
      </section>
      <section><img src="images/profile.jpg" class="avatar">
        <h4><i class="fa fa-twitter">alexsotob - lordofthejars.com</i></h4><img src="images/cloudbees.png" class="cloudbees"><img src="images/logos.png" class="logos">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--mac" class="mac undefined">
        <h1>Software is eating the world</h1>
        <aside role="note">Every business is in the sw business</aside>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/cockpit.jpg" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/tesla.jpg" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/tesla-update.jpg" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/tesla-news.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/airport.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/casino.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <ul class="lists">
          <li><i class="fa fa-laptop fa-3x"></i><i class="fa fa-long-arrow-right fa-3x"></i><i class="fa fa-server fa-3x"></i></li>
          <li>Faster</li>
          <li>Sooner</li>
          <li>Better</li>
        </ul>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--ci" class="ci undefined">
        <h2>Key is Automation</h2>
        <aside role="note">Learn from car factory, automatic and pipelined</aside>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/pipeline.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/jenkinseco.jpg" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/normaldeployment.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--heat" class="heat undefined">
        <h2>speed + friction = <span class='important'>HEAT</span></h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--bob" class="bob undefined">
        <h2>GO - GO - GO</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--docker" class="docker undefined">
        <h2>Containers Codify<br/> OS Config</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
        <aside role="note">An OS level virtualization system for running multiple isolated Linux systems on a single Linux host.</aside>
      </section>
      <section><img src="images/dockerdeployment.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--sheep" class="sheep undefined">
        <h2>How I build a Docker image?</h2>
        <pre class="small language-javascript"><code>$ docker run -ti ubuntu:12.10 bash

[a2b] apt-get update
[a2b] apt-get install curl
[a2b] exit

$ docker commit -m "curl installed" a2b username/image
$ docker build .
</code></pre>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--dockjenk" class="dockjenk undefined">
      </section>
      <section>
        <h2 class="underline">Jenkins: Docker and CD</h2>
        <ul class="listsleft">
          <li><span class="listhighlight">Docker Hub Notification:</span><span class="description">&nbsp;triggers downstream jobs when a tagged container is pushed to Docker Hub</span></li>
          <li><span class="listhighlight">Docker Traceability:</span><span class="description">&nbsp;identifies which build pushed a particular container, displays on Jenkins builds page</span></li>
          <li><span class="listhighlight">Docker Custom Build Environment:</span><span class="description">&nbsp;specifies customized build environments as Docker containers </span></li>
          <li><span class="listhighlight">Docker:</span><span class="description">&nbsp;use a docker host to dynamically provision a slave, run a single build, then tear-down</span></li>
          <li><span class="listhighlight">Build and Publish :</span><span class="description">&nbsp;builds projects that have a Dockerfile and pushes the resultant tagged image to Docker Hub</span></li>
        </ul>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Build, Test, & Deploy Docker Images from Jenkins</h2><img src="images/plugins.png" style="height:70%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Docker Hub Notification Plugin</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/webhookhub.png" style="height:70%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/hubconf.png" style="height:70%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
        <aside role="note">DOCKER_TRIGGER_REPO_NAME</aside>
      </section>
      <section>
        <h2>Docker Traceability Plugin</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/fingerprints.png" style="height:60%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
        <aside role="note">Uses Jenkins artifact fingerprint as well</aside>
      </section>
      <section><img src="images/listcontainers.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/dockerevents.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Docker Plugin</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/template.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Docker Custom Build Environment Plugin</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/dockercustom.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/build-docker-tag.png" style="height:30%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Build and Publish Plugin</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/archiveartifacts.png" style="height:70%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/copyartifacts.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/build-config.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--alexoh" class="alexoh undefined">
        <h2>No More <span class="important">Build</span> Jobs/Up/Down<span class="important">streams</span> PLEASE!!!! </h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--orch" class="orch undefined">
        <h1>Pipeline Plugin</h1>
        <h3>Continuous Delivery as Code</h3>
        <aside role="note">Groovy DSL </aside>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2 class="underline">Features of Pipeline Plugin</h2>
        <ul class="lists">
          <li>Configuration in Source Repositories</li>
          <li>Less click-and-type, more code</li>
          <li>From simple to complex</li>
          <li>Survives Jenkins restarts & connection losses ($)</li>
          <li>Reusable Definitions</li>
          <li>Build history/trend segregated per branches</li>
          <li>UI ($ -> OSS)</li>
        </ul>
      </section>
      <section><img src="images/pipelineplug.png" class="schemash">
      </section>
      <section>
        <h2>Jenkinsfile (1/3)</h2>
        <pre class="small language-javascript"><code>stage 'compileAndUnit'
node {
        git branch: 'master', url: 'https://github.com/lordofthejars/starwars.git'
        gradle 'clean test'
        stash excludes: 'build/', includes: '**', name: 'source'
        stash includes: 'build/jacoco/*.exec', name: 'unitCodeCoverage'
        step([$class: 'JUnitResultArchiver', testResults: '**/build/test-results/*.xml'])
}

stage 'codeQuality'
parallel 'pmd' : {
    node {
        unstash 'source'
        gradle 'pmdMain'
        step([$class: 'PmdPublisher', pattern: 'build/reports/pmd/*.xml'])
    }
}, 'jacoco': {
    node {
        unstash 'source'
        unstash 'unitCodeCoverage'
        gradle 'jacocoTestReport'
    }
}</code></pre>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section> 
        <h2>Jenkinsfile (2/3)</h2>
        <pre class="small language-javascript"><code>stage 'assemble-binaries'

node('linux') {
    unstash 'source'
    withEnv(["SOURCE_BUILD_NUMBER=${env.BUILD_NUMBER}"]) {
        gradle 'assemble'
    }
}

input message: "Deploy Application to QA ?"

stage name: 'Deploy to QA', concurrency: 1
node {
    echo "Application Deployed to QA."
}</code></pre>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section> 
        <h2>Jenkinsfile (3/3)</h2>
        <pre class="small language-javascript"><code>gradle = load 'jenkins/gradle.groovy'

withCredentials([[$class: 'UsernamePasswordMultiBinding', 
                  credentialsId: 'MyID', usernameVariable: 'GIT_USERNAME', 
                  passwordVariable: 'GIT_PASSWORD']]) {
sh "git tag -a some_tag -m 'Jenkins'"
  sh "git push https://${env.GIT_USERNAME}:${env.GIT_PASSWORD}@<REPO> --tags"
}

def mvnHome tool 'Maven 3.3.3'
sh "${mvnHome}/bin/mvn -B verify"</code></pre><img src="images/credentials.png" style="height:20%" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--whale" class="whale undefined">
        <h2>Docker Pipeline Integration</h2>
      </section>
      <section>
        <h2>Jenkinsfile (1/2)</h2>
        <pre class="small language-javascript"><code>docker.withRegistry('https://lordofthejars-docker-continuous_delivery.bintray.io', 'd4fc3fa9-39f7-47ea-a57c-795642f90989') {
    git 'git@github.com:lordofthejars/busybox.git' 
    def newApp = docker.build "lordofthejars-docker-continuous_delivery.bintray.io/lordofthejars/javatest:${env.BUILD_TAG}"
    newApp.push()
}

docker.image('lordofthejars/javatest').withRun {c ->
  sh './executeTests.sh'
}</code></pre>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>Jenkinsfile (2/2)</h2>
        <pre class="small language-javascript"><code>docker.image('maven:3.3.3-jdk-8').inside('-v ~/.m2/repository:/m2repo -u 1000:50') {
  git '…your-sources…'
  sh 'mvn -Dmaven.repo.local=/m2repo clean install'
}


docker.withServer('tcp://swarm.mycorp.com:2376', 'swarm-certs') {
  docker.image('httpd').withRun('-p 8080:80') {c ->
    sh "curl -i http://${hostIp(c)}:8080/"
  }
}
def hostIp(container) {
  sh "docker inspect -f {{.Node.Ip}} ${container.id} > hostIp"
  readFile('hostIp').trim()
}</code></pre>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/ui.png" class="schemash">
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--adathink" class="adathink undefined">
        <h1>Let's wind <br/> down</h1>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2 class="underline">Conclusions</h2>
        <ul class="lists">
          <li>Automation is the Key</li>
          <li>Docker Simplifies Environment Problems</li>
          <li>Jenkins is Ready For Docker and CD</li>
          <li>Pipleline as Code gives you Freedom</li>
        </ul>
        <aside role="note">Docker in Prod or helper</aside>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--puzzle" class="puzzle undefined">
        <h2>Only One Piece of the Jigsaw</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--penalty" class="penalty undefined">
        <h2>Follow the Rules, Adapt to your Needs</h2>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section>
        <h2>CloudBees</h2><i class="fa fa-heart important fa-2x"></i>
        <h2>Jenkins</h2>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--deming" class="deming undefined">
        <h3>It is not necessary to change. <br/> Survival is not mandatory.</h3>
        <h4>W. Edwards Deming</h4>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section data-bespoke-backdrop="backdrop backdrop--adarise" class="adarise undefined">
        <h1>Questions</h1>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><img src="images/profile.jpg" class="avatar"><br><a href="http://www.slideshare.net/asotobu/jenkins-docker" style="border:none"><i class="fa fa-github"></i>
          <h3>http://www.slideshare.net/asotobu/jenkins-docker</h3><i class="fa fa-envelope"></i>
          <h3>asotobu@gmail.com</h3></a>
        <div class="footer"><i class="fa fa-twitter">&nbsp;alexsotob&nbsp;</i><i class="fa fa-github">&nbsp;lordofthejars</i></div>
      </section>
      <section><a href="github.com/lordofthejars/starwars" style="border:none"> 
          <h5 style="font-size: .55em">https://github.com/lordofthejars/starwars</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Pipeline+Plugin" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Pipeline+Plugin</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Traceability" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Traceability</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Build+and+Publish+plugin" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Build+and+Publish+plugin</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Hub+Notification" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Docker+Hub+Notification</h5></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/Docker+Plugin" style="border:none"> 
          <h5 style="font-size: .55em">https://wiki.jenkins-ci.org/display/JENKINS/Docker+Plugin</h5></a>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>